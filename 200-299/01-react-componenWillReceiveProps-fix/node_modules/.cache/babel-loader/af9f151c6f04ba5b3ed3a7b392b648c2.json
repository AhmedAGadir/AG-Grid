{"ast":null,"code":"/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v19.1.4\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar gridOptionsWrapper_1 = require(\"../gridOptionsWrapper\");\n\nvar columnController_1 = require(\"../columnController/columnController\");\n\nvar column_1 = require(\"../entities/column\");\n\nvar context_1 = require(\"../context/context\");\n\nvar headerContainer_1 = require(\"./headerContainer\");\n\nvar eventService_1 = require(\"../eventService\");\n\nvar events_1 = require(\"../events\");\n\nvar scrollVisibleService_1 = require(\"../gridPanel/scrollVisibleService\");\n\nvar component_1 = require(\"../widgets/component\");\n\nvar componentAnnotations_1 = require(\"../widgets/componentAnnotations\");\n\nvar utils_1 = require(\"../utils\");\n\nvar gridApi_1 = require(\"../gridApi\");\n\nvar autoWidthCalculator_1 = require(\"../rendering/autoWidthCalculator\");\n\nvar constants_1 = require(\"../constants\");\n\nvar HeaderRootComp =\n/** @class */\nfunction (_super) {\n  __extends(HeaderRootComp, _super);\n\n  function HeaderRootComp() {\n    return _super.call(this, HeaderRootComp.TEMPLATE) || this;\n  }\n\n  HeaderRootComp.prototype.registerGridComp = function (gridPanel) {\n    this.gridPanel = gridPanel;\n    this.centerContainer.registerGridComp(gridPanel);\n    this.pinnedLeftContainer.registerGridComp(gridPanel);\n    this.pinnedRightContainer.registerGridComp(gridPanel);\n  };\n\n  HeaderRootComp.prototype.postConstruct = function () {\n    var _this = this;\n\n    this.printLayout = this.gridOptionsWrapper.getDomLayout() === constants_1.Constants.DOM_LAYOUT_PRINT;\n    this.gridApi.registerHeaderRootComp(this);\n    this.autoWidthCalculator.registerHeaderRootComp(this);\n    this.centerContainer = new headerContainer_1.HeaderContainer(this.eHeaderContainer, this.eHeaderViewport, null);\n    this.childContainers = [this.centerContainer];\n    this.pinnedLeftContainer = new headerContainer_1.HeaderContainer(this.ePinnedLeftHeader, null, column_1.Column.PINNED_LEFT);\n    this.pinnedRightContainer = new headerContainer_1.HeaderContainer(this.ePinnedRightHeader, null, column_1.Column.PINNED_RIGHT);\n    this.childContainers.push(this.pinnedLeftContainer);\n    this.childContainers.push(this.pinnedRightContainer);\n    this.childContainers.forEach(function (container) {\n      return _this.context.wireBean(container);\n    }); // shotgun way to get labels to change, eg from sum(amount) to avg(amount)\n\n    this.eventService.addEventListener(events_1.Events.EVENT_COLUMN_VALUE_CHANGED, this.refreshHeader.bind(this));\n    this.addDestroyableEventListener(this.gridOptionsWrapper, gridOptionsWrapper_1.GridOptionsWrapper.PROP_DOM_LAYOUT, this.onDomLayoutChanged.bind(this)); // for setting ag-pivot-on / ag-pivot-off CSS classes\n\n    this.eventService.addEventListener(events_1.Events.EVENT_COLUMN_PIVOT_MODE_CHANGED, this.onPivotModeChanged.bind(this));\n    this.onPivotModeChanged();\n    this.addPreventHeaderScroll();\n\n    if (this.columnController.isReady()) {\n      this.refreshHeader();\n    }\n  };\n\n  HeaderRootComp.prototype.onDomLayoutChanged = function () {\n    var newValue = this.gridOptionsWrapper.getDomLayout() === constants_1.Constants.DOM_LAYOUT_PRINT;\n\n    if (this.printLayout !== newValue) {\n      this.printLayout = newValue;\n      this.refreshHeader();\n    }\n  };\n\n  HeaderRootComp.prototype.setHorizontalScroll = function (offset) {\n    this.eHeaderContainer.style.left = offset + 'px';\n  };\n\n  HeaderRootComp.prototype.forEachHeaderElement = function (callback) {\n    this.childContainers.forEach(function (childContainer) {\n      return childContainer.forEachHeaderElement(callback);\n    });\n  };\n\n  HeaderRootComp.prototype.destroy = function () {\n    this.childContainers.forEach(function (container) {\n      return container.destroy();\n    });\n  };\n\n  HeaderRootComp.prototype.refreshHeader = function () {\n    this.childContainers.forEach(function (container) {\n      return container.refresh();\n    });\n  };\n\n  HeaderRootComp.prototype.onPivotModeChanged = function () {\n    var pivotMode = this.columnController.isPivotMode();\n    utils_1.Utils.addOrRemoveCssClass(this.getGui(), 'ag-pivot-on', pivotMode);\n    utils_1.Utils.addOrRemoveCssClass(this.getGui(), 'ag-pivot-off', !pivotMode);\n  };\n\n  HeaderRootComp.prototype.setHeight = function (height) {\n    this.getGui().style.height = height + 'px';\n    this.getGui().style.minHeight = height + 'px';\n  }; // if the user is in floating filter and hits tab a few times, the header can\n  // end up scrolling to show items off the screen, leaving the grid and header\n  // and the grid columns no longer in sync.\n\n\n  HeaderRootComp.prototype.addPreventHeaderScroll = function () {\n    var _this = this;\n\n    this.addDestroyableEventListener(this.eHeaderViewport, 'scroll', function () {\n      // if the header scrolls, the header will be out of sync. so we reset the\n      // header scroll, and then scroll the body, which will in turn set the offset\n      // on the header, giving the impression that the header scrolled as expected.\n      var scrollLeft = _this.eHeaderViewport.scrollLeft;\n\n      if (scrollLeft !== 0) {\n        _this.gridPanel.scrollHorizontally(scrollLeft);\n\n        _this.eHeaderViewport.scrollLeft = 0;\n      }\n    });\n  };\n\n  HeaderRootComp.prototype.setLeftVisible = function (visible) {\n    utils_1.Utils.setVisible(this.ePinnedLeftHeader, visible);\n  };\n\n  HeaderRootComp.prototype.setRightVisible = function (visible) {\n    utils_1.Utils.setVisible(this.ePinnedRightHeader, visible);\n  };\n\n  HeaderRootComp.TEMPLATE = \"<div class=\\\"ag-header\\\" role=\\\"row\\\">\\n            <div class=\\\"ag-pinned-left-header\\\" ref=\\\"ePinnedLeftHeader\\\" role=\\\"presentation\\\"></div>\\n            <div class=\\\"ag-header-viewport\\\" ref=\\\"eHeaderViewport\\\" role=\\\"presentation\\\">\\n                <div class=\\\"ag-header-container\\\" ref=\\\"eHeaderContainer\\\" role=\\\"presentation\\\"></div>\\n            </div>\\n            <div class=\\\"ag-pinned-right-header\\\" ref=\\\"ePinnedRightHeader\\\" role=\\\"presentation\\\"></div>\\n        </div>\";\n\n  __decorate([componentAnnotations_1.RefSelector('ePinnedLeftHeader'), __metadata(\"design:type\", HTMLElement)], HeaderRootComp.prototype, \"ePinnedLeftHeader\", void 0);\n\n  __decorate([componentAnnotations_1.RefSelector('ePinnedRightHeader'), __metadata(\"design:type\", HTMLElement)], HeaderRootComp.prototype, \"ePinnedRightHeader\", void 0);\n\n  __decorate([componentAnnotations_1.RefSelector('eHeaderContainer'), __metadata(\"design:type\", HTMLElement)], HeaderRootComp.prototype, \"eHeaderContainer\", void 0);\n\n  __decorate([componentAnnotations_1.RefSelector('eHeaderViewport'), __metadata(\"design:type\", HTMLElement)], HeaderRootComp.prototype, \"eHeaderViewport\", void 0);\n\n  __decorate([context_1.Autowired('gridOptionsWrapper'), __metadata(\"design:type\", gridOptionsWrapper_1.GridOptionsWrapper)], HeaderRootComp.prototype, \"gridOptionsWrapper\", void 0);\n\n  __decorate([context_1.Autowired('columnController'), __metadata(\"design:type\", columnController_1.ColumnController)], HeaderRootComp.prototype, \"columnController\", void 0);\n\n  __decorate([context_1.Autowired('context'), __metadata(\"design:type\", context_1.Context)], HeaderRootComp.prototype, \"context\", void 0);\n\n  __decorate([context_1.Autowired('eventService'), __metadata(\"design:type\", eventService_1.EventService)], HeaderRootComp.prototype, \"eventService\", void 0);\n\n  __decorate([context_1.Autowired('scrollVisibleService'), __metadata(\"design:type\", scrollVisibleService_1.ScrollVisibleService)], HeaderRootComp.prototype, \"scrollVisibleService\", void 0);\n\n  __decorate([context_1.Autowired('gridApi'), __metadata(\"design:type\", gridApi_1.GridApi)], HeaderRootComp.prototype, \"gridApi\", void 0);\n\n  __decorate([context_1.Autowired('autoWidthCalculator'), __metadata(\"design:type\", autoWidthCalculator_1.AutoWidthCalculator)], HeaderRootComp.prototype, \"autoWidthCalculator\", void 0);\n\n  __decorate([context_1.PostConstruct, __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], HeaderRootComp.prototype, \"postConstruct\", null);\n\n  __decorate([context_1.PreDestroy, __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", []), __metadata(\"design:returntype\", void 0)], HeaderRootComp.prototype, \"destroy\", null);\n\n  return HeaderRootComp;\n}(component_1.Component);\n\nexports.HeaderRootComp = HeaderRootComp;","map":null,"metadata":{},"sourceType":"script"}