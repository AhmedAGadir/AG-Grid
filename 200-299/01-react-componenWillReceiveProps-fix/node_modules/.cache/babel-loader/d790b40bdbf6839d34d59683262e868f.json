{"ast":null,"code":"/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v19.1.4\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar context_1 = require(\"./context/context\");\n\nvar constants_1 = require(\"./constants\");\n\nvar columnController_1 = require(\"./columnController/columnController\");\n\nvar utils_1 = require(\"./utils\");\n\nvar gridRow_1 = require(\"./entities/gridRow\");\n\nvar gridCell_1 = require(\"./entities/gridCell\");\n\nvar gridOptionsWrapper_1 = require(\"./gridOptionsWrapper\");\n\nvar pinnedRowModel_1 = require(\"./rowModels/pinnedRowModel\");\n\nvar CellNavigationService =\n/** @class */\nfunction () {\n  function CellNavigationService() {} // returns null if no cell to focus on, ie at the end of the grid\n\n\n  CellNavigationService.prototype.getNextCellToFocus = function (key, lastCellToFocus) {\n    // starting with the provided cell, we keep moving until we find a cell we can\n    // focus on.\n    var pointer = lastCellToFocus;\n    var finished = false; // finished will be true when either:\n    // a) cell found that we can focus on\n    // b) run out of cells (ie the method returns null)\n\n    while (!finished) {\n      switch (key) {\n        case constants_1.Constants.KEY_UP:\n          pointer = this.getCellAbove(pointer);\n          break;\n\n        case constants_1.Constants.KEY_DOWN:\n          pointer = this.getCellBelow(pointer);\n          break;\n\n        case constants_1.Constants.KEY_RIGHT:\n          if (this.gridOptionsWrapper.isEnableRtl()) {\n            pointer = this.getCellToLeft(pointer);\n          } else {\n            pointer = this.getCellToRight(pointer);\n          }\n\n          break;\n\n        case constants_1.Constants.KEY_LEFT:\n          if (this.gridOptionsWrapper.isEnableRtl()) {\n            pointer = this.getCellToRight(pointer);\n          } else {\n            pointer = this.getCellToLeft(pointer);\n          }\n\n          break;\n\n        default:\n          pointer = null;\n          console.log('ag-Grid: unknown key for navigation ' + key);\n          break;\n      }\n\n      if (pointer) {\n        finished = this.isCellGoodToFocusOn(pointer);\n      } else {\n        finished = true;\n      }\n    }\n\n    return pointer;\n  };\n\n  CellNavigationService.prototype.isCellGoodToFocusOn = function (gridCell) {\n    var column = gridCell.column;\n    var rowNode;\n\n    switch (gridCell.floating) {\n      case constants_1.Constants.PINNED_TOP:\n        rowNode = this.pinnedRowModel.getPinnedTopRow(gridCell.rowIndex);\n        break;\n\n      case constants_1.Constants.PINNED_BOTTOM:\n        rowNode = this.pinnedRowModel.getPinnedBottomRow(gridCell.rowIndex);\n        break;\n\n      default:\n        rowNode = this.rowModel.getRow(gridCell.rowIndex);\n        break;\n    }\n\n    var suppressNavigable = column.isSuppressNavigable(rowNode);\n    return !suppressNavigable;\n  };\n\n  CellNavigationService.prototype.getCellToLeft = function (lastCell) {\n    if (!lastCell) {\n      return null;\n    }\n\n    var colToLeft = this.columnController.getDisplayedColBefore(lastCell.column);\n\n    if (!colToLeft) {\n      return null;\n    } else {\n      var gridCellDef = {\n        rowIndex: lastCell.rowIndex,\n        column: colToLeft,\n        floating: lastCell.floating\n      };\n      return new gridCell_1.GridCell(gridCellDef);\n    }\n  };\n\n  CellNavigationService.prototype.getCellToRight = function (lastCell) {\n    if (!lastCell) {\n      return null;\n    }\n\n    var colToRight = this.columnController.getDisplayedColAfter(lastCell.column); // if already on right, do nothing\n\n    if (!colToRight) {\n      return null;\n    } else {\n      var gridCellDef = {\n        rowIndex: lastCell.rowIndex,\n        column: colToRight,\n        floating: lastCell.floating\n      };\n      return new gridCell_1.GridCell(gridCellDef);\n    }\n  };\n\n  CellNavigationService.prototype.getRowBelow = function (lastRow) {\n    // if already on top row, do nothing\n    if (this.isLastRowInContainer(lastRow)) {\n      if (lastRow.isFloatingBottom()) {\n        return null;\n      } else if (lastRow.isNotFloating()) {\n        if (this.pinnedRowModel.isRowsToRender(constants_1.Constants.PINNED_BOTTOM)) {\n          return new gridRow_1.GridRow(0, constants_1.Constants.PINNED_BOTTOM);\n        } else {\n          return null;\n        }\n      } else {\n        if (this.rowModel.isRowsToRender()) {\n          return new gridRow_1.GridRow(0, null);\n        } else if (this.pinnedRowModel.isRowsToRender(constants_1.Constants.PINNED_BOTTOM)) {\n          return new gridRow_1.GridRow(0, constants_1.Constants.PINNED_BOTTOM);\n        } else {\n          return null;\n        }\n      }\n    } else {\n      return new gridRow_1.GridRow(lastRow.rowIndex + 1, lastRow.floating);\n    }\n  };\n\n  CellNavigationService.prototype.getCellBelow = function (lastCell) {\n    if (!lastCell) {\n      return null;\n    }\n\n    var rowBelow = this.getRowBelow(lastCell.getGridRow());\n\n    if (rowBelow) {\n      var gridCellDef = {\n        rowIndex: rowBelow.rowIndex,\n        column: lastCell.column,\n        floating: rowBelow.floating\n      };\n      return new gridCell_1.GridCell(gridCellDef);\n    } else {\n      return null;\n    }\n  };\n\n  CellNavigationService.prototype.isLastRowInContainer = function (gridRow) {\n    if (gridRow.isFloatingTop()) {\n      var lastTopIndex = this.pinnedRowModel.getPinnedTopRowData().length - 1;\n      return lastTopIndex <= gridRow.rowIndex;\n    } else if (gridRow.isFloatingBottom()) {\n      var lastBottomIndex = this.pinnedRowModel.getPinnedBottomRowData().length - 1;\n      return lastBottomIndex <= gridRow.rowIndex;\n    } else {\n      var lastBodyIndex = this.rowModel.getPageLastRow();\n      return lastBodyIndex <= gridRow.rowIndex;\n    }\n  };\n\n  CellNavigationService.prototype.getRowAbove = function (lastRow) {\n    // if already on top row, do nothing\n    if (lastRow.rowIndex === 0) {\n      if (lastRow.isFloatingTop()) {\n        return null;\n      } else if (lastRow.isNotFloating()) {\n        if (this.pinnedRowModel.isRowsToRender(constants_1.Constants.PINNED_TOP)) {\n          return this.getLastFloatingTopRow();\n        } else {\n          return null;\n        }\n      } else {\n        // last floating bottom\n        if (this.rowModel.isRowsToRender()) {\n          return this.getLastBodyCell();\n        } else if (this.pinnedRowModel.isRowsToRender(constants_1.Constants.PINNED_TOP)) {\n          return this.getLastFloatingTopRow();\n        } else {\n          return null;\n        }\n      }\n    } else {\n      return new gridRow_1.GridRow(lastRow.rowIndex - 1, lastRow.floating);\n    }\n  };\n\n  CellNavigationService.prototype.getCellAbove = function (lastCell) {\n    if (!lastCell) {\n      return null;\n    }\n\n    var rowAbove = this.getRowAbove(lastCell.getGridRow());\n\n    if (rowAbove) {\n      var gridCellDef = {\n        rowIndex: rowAbove.rowIndex,\n        column: lastCell.column,\n        floating: rowAbove.floating\n      };\n      return new gridCell_1.GridCell(gridCellDef);\n    } else {\n      return null;\n    }\n  };\n\n  CellNavigationService.prototype.getLastBodyCell = function () {\n    var lastBodyRow = this.rowModel.getPageLastRow();\n    return new gridRow_1.GridRow(lastBodyRow, null);\n  };\n\n  CellNavigationService.prototype.getLastFloatingTopRow = function () {\n    var lastFloatingRow = this.pinnedRowModel.getPinnedTopRowData().length - 1;\n    return new gridRow_1.GridRow(lastFloatingRow, constants_1.Constants.PINNED_TOP);\n  };\n\n  CellNavigationService.prototype.getNextTabbedCell = function (gridCell, backwards) {\n    if (backwards) {\n      return this.getNextTabbedCellBackwards(gridCell);\n    } else {\n      return this.getNextTabbedCellForwards(gridCell);\n    }\n  };\n\n  CellNavigationService.prototype.getNextTabbedCellForwards = function (gridCell) {\n    var displayedColumns = this.columnController.getAllDisplayedColumns();\n    var newRowIndex = gridCell.rowIndex;\n    var newFloating = gridCell.floating; // move along to the next cell\n\n    var newColumn = this.columnController.getDisplayedColAfter(gridCell.column); // check if end of the row, and if so, go forward a row\n\n    if (!newColumn) {\n      newColumn = displayedColumns[0];\n      var rowBelow = this.getRowBelow(gridCell.getGridRow());\n\n      if (utils_1.Utils.missing(rowBelow)) {\n        return null;\n      }\n\n      newRowIndex = rowBelow ? rowBelow.rowIndex : null;\n      newFloating = rowBelow ? rowBelow.floating : null;\n    }\n\n    var gridCellDef = {\n      rowIndex: newRowIndex,\n      column: newColumn,\n      floating: newFloating\n    };\n    return new gridCell_1.GridCell(gridCellDef);\n  };\n\n  CellNavigationService.prototype.getNextTabbedCellBackwards = function (gridCell) {\n    var displayedColumns = this.columnController.getAllDisplayedColumns();\n    var newRowIndex = gridCell.rowIndex;\n    var newFloating = gridCell.floating; // move along to the next cell\n\n    var newColumn = this.columnController.getDisplayedColBefore(gridCell.column); // check if end of the row, and if so, go forward a row\n\n    if (!newColumn) {\n      newColumn = displayedColumns[displayedColumns.length - 1];\n      var rowAbove = this.getRowAbove(gridCell.getGridRow());\n\n      if (utils_1.Utils.missing(rowAbove)) {\n        return null;\n      }\n\n      newRowIndex = rowAbove ? rowAbove.rowIndex : null;\n      newFloating = rowAbove ? rowAbove.floating : null;\n    }\n\n    var gridCellDef = {\n      rowIndex: newRowIndex,\n      column: newColumn,\n      floating: newFloating\n    };\n    return new gridCell_1.GridCell(gridCellDef);\n  };\n\n  __decorate([context_1.Autowired('columnController'), __metadata(\"design:type\", columnController_1.ColumnController)], CellNavigationService.prototype, \"columnController\", void 0);\n\n  __decorate([context_1.Autowired('rowModel'), __metadata(\"design:type\", Object)], CellNavigationService.prototype, \"rowModel\", void 0);\n\n  __decorate([context_1.Autowired('pinnedRowModel'), __metadata(\"design:type\", pinnedRowModel_1.PinnedRowModel)], CellNavigationService.prototype, \"pinnedRowModel\", void 0);\n\n  __decorate([context_1.Autowired('gridOptionsWrapper'), __metadata(\"design:type\", gridOptionsWrapper_1.GridOptionsWrapper)], CellNavigationService.prototype, \"gridOptionsWrapper\", void 0);\n\n  CellNavigationService = __decorate([context_1.Bean('cellNavigationService')], CellNavigationService);\n  return CellNavigationService;\n}();\n\nexports.CellNavigationService = CellNavigationService;","map":null,"metadata":{},"sourceType":"script"}