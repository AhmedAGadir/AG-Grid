{"ast":null,"code":"/**\n * ag-grid-community - Advanced Data Grid / Data Table supporting Javascript / React / AngularJS / Web Components\n * @version v19.1.4\n * @link http://www.ag-grid.com/\n * @license MIT\n */\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar gridOptionsWrapper_1 = require(\"./gridOptionsWrapper\");\n\nvar selectionController_1 = require(\"./selectionController\");\n\nvar columnApi_1 = require(\"./columnController/columnApi\");\n\nvar columnController_1 = require(\"./columnController/columnController\");\n\nvar rowRenderer_1 = require(\"./rendering/rowRenderer\");\n\nvar headerRootComp_1 = require(\"./headerRendering/headerRootComp\");\n\nvar filterManager_1 = require(\"./filter/filterManager\");\n\nvar valueService_1 = require(\"./valueService/valueService\");\n\nvar eventService_1 = require(\"./eventService\");\n\nvar gridPanel_1 = require(\"./gridPanel/gridPanel\");\n\nvar gridApi_1 = require(\"./gridApi\");\n\nvar columnFactory_1 = require(\"./columnController/columnFactory\");\n\nvar displayedGroupCreator_1 = require(\"./columnController/displayedGroupCreator\");\n\nvar expressionService_1 = require(\"./valueService/expressionService\");\n\nvar templateService_1 = require(\"./templateService\");\n\nvar popupService_1 = require(\"./widgets/popupService\");\n\nvar logger_1 = require(\"./logger\");\n\nvar columnUtils_1 = require(\"./columnController/columnUtils\");\n\nvar autoWidthCalculator_1 = require(\"./rendering/autoWidthCalculator\");\n\nvar horizontalResizeService_1 = require(\"./headerRendering/horizontalResizeService\");\n\nvar context_1 = require(\"./context/context\");\n\nvar csvCreator_1 = require(\"./exporter/csvCreator\");\n\nvar gridCore_1 = require(\"./gridCore\");\n\nvar standardMenu_1 = require(\"./headerRendering/standardMenu\");\n\nvar dragAndDropService_1 = require(\"./dragAndDrop/dragAndDropService\");\n\nvar dragService_1 = require(\"./dragAndDrop/dragService\");\n\nvar sortController_1 = require(\"./sortController\");\n\nvar focusedCellController_1 = require(\"./focusedCellController\");\n\nvar mouseEventService_1 = require(\"./gridPanel/mouseEventService\");\n\nvar cellNavigationService_1 = require(\"./cellNavigationService\");\n\nvar utils_1 = require(\"./utils\");\n\nvar filterStage_1 = require(\"./rowModels/clientSide/filterStage\");\n\nvar sortStage_1 = require(\"./rowModels/clientSide/sortStage\");\n\nvar flattenStage_1 = require(\"./rowModels/clientSide/flattenStage\");\n\nvar cellEditorFactory_1 = require(\"./rendering/cellEditorFactory\");\n\nvar events_1 = require(\"./events\");\n\nvar infiniteRowModel_1 = require(\"./rowModels/infinite/infiniteRowModel\");\n\nvar clientSideRowModel_1 = require(\"./rowModels/clientSide/clientSideRowModel\");\n\nvar cellRendererFactory_1 = require(\"./rendering/cellRendererFactory\");\n\nvar cellRendererService_1 = require(\"./rendering/cellRendererService\");\n\nvar valueFormatterService_1 = require(\"./rendering/valueFormatterService\");\n\nvar agCheckbox_1 = require(\"./widgets/agCheckbox\");\n\nvar baseFrameworkFactory_1 = require(\"./baseFrameworkFactory\");\n\nvar scrollVisibleService_1 = require(\"./gridPanel/scrollVisibleService\");\n\nvar downloader_1 = require(\"./exporter/downloader\");\n\nvar xmlFactory_1 = require(\"./exporter/xmlFactory\");\n\nvar gridSerializer_1 = require(\"./exporter/gridSerializer\");\n\nvar stylingService_1 = require(\"./styling/stylingService\");\n\nvar columnHoverService_1 = require(\"./rendering/columnHoverService\");\n\nvar columnAnimationService_1 = require(\"./rendering/columnAnimationService\");\n\nvar sortService_1 = require(\"./rowNodes/sortService\");\n\nvar filterService_1 = require(\"./rowNodes/filterService\");\n\nvar autoGroupColService_1 = require(\"./columnController/autoGroupColService\");\n\nvar paginationProxy_1 = require(\"./rowModels/paginationProxy\");\n\nvar immutableService_1 = require(\"./rowModels/clientSide/immutableService\");\n\nvar constants_1 = require(\"./constants\");\n\nvar valueCache_1 = require(\"./valueService/valueCache\");\n\nvar changeDetectionService_1 = require(\"./valueService/changeDetectionService\");\n\nvar alignedGridsService_1 = require(\"./alignedGridsService\");\n\nvar pinnedRowModel_1 = require(\"./rowModels/pinnedRowModel\");\n\nvar componentResolver_1 = require(\"./components/framework/componentResolver\");\n\nvar componentRecipes_1 = require(\"./components/framework/componentRecipes\");\n\nvar componentProvider_1 = require(\"./components/framework/componentProvider\");\n\nvar agComponentUtils_1 = require(\"./components/framework/agComponentUtils\");\n\nvar componentMetadataProvider_1 = require(\"./components/framework/componentMetadataProvider\");\n\nvar beans_1 = require(\"./rendering/beans\");\n\nvar environment_1 = require(\"./environment\");\n\nvar animationFrameService_1 = require(\"./misc/animationFrameService\");\n\nvar navigationService_1 = require(\"./gridPanel/navigationService\");\n\nvar heightScaler_1 = require(\"./rendering/heightScaler\");\n\nvar selectableService_1 = require(\"./rowNodes/selectableService\");\n\nvar autoHeightCalculator_1 = require(\"./rendering/autoHeightCalculator\");\n\nvar paginationComp_1 = require(\"./rowModels/pagination/paginationComp\");\n\nvar resizeObserverService_1 = require(\"./misc/resizeObserverService\");\n\nvar zipContainer_1 = require(\"./exporter/files/zip/zipContainer\");\n\nvar Grid =\n/** @class */\nfunction () {\n  function Grid(eGridDiv, gridOptions, params) {\n    if (!eGridDiv) {\n      console.error('ag-Grid: no div element provided to the grid');\n    }\n\n    if (!gridOptions) {\n      console.error('ag-Grid: no gridOptions provided to the grid');\n    }\n\n    var rowModelClass = this.getRowModelClass(gridOptions);\n    var enterprise = utils_1.Utils.exists(Grid.enterpriseBeans);\n    var frameworkFactory = params ? params.frameworkFactory : null;\n\n    if (utils_1.Utils.missing(frameworkFactory)) {\n      frameworkFactory = new baseFrameworkFactory_1.BaseFrameworkFactory();\n    }\n\n    var overrideBeans = [];\n\n    if (Grid.enterpriseBeans) {\n      overrideBeans = overrideBeans.concat(Grid.enterpriseBeans);\n    }\n\n    if (Grid.frameworkBeans) {\n      overrideBeans = overrideBeans.concat(Grid.frameworkBeans);\n    }\n\n    var seed = {\n      enterprise: enterprise,\n      gridOptions: gridOptions,\n      eGridDiv: eGridDiv,\n      $scope: params ? params.$scope : null,\n      $compile: params ? params.$compile : null,\n      quickFilterOnScope: params ? params.quickFilterOnScope : null,\n      globalEventListener: params ? params.globalEventListener : null,\n      frameworkFactory: frameworkFactory\n    };\n\n    if (params && params.seedBeanInstances) {\n      utils_1.Utils.assign(seed, params.seedBeanInstances);\n    }\n\n    var components = [{\n      componentName: 'AgCheckbox',\n      theClass: agCheckbox_1.AgCheckbox\n    }, {\n      componentName: 'AgGridComp',\n      theClass: gridPanel_1.GridPanel\n    }, {\n      componentName: 'AgHeaderRoot',\n      theClass: headerRootComp_1.HeaderRootComp\n    }, {\n      componentName: 'AgPagination',\n      theClass: paginationComp_1.PaginationComp\n    }];\n\n    if (Grid.enterpriseComponents) {\n      components = components.concat(Grid.enterpriseComponents);\n    }\n\n    var contextParams = {\n      overrideBeans: overrideBeans,\n      seed: seed,\n      //Careful with the order of the beans here, there are dependencies between them that need to be kept\n      beans: [rowModelClass, beans_1.Beans, paginationProxy_1.PaginationAutoPageSizeService, gridApi_1.GridApi, componentProvider_1.ComponentProvider, agComponentUtils_1.AgComponentUtils, componentMetadataProvider_1.ComponentMetadataProvider, resizeObserverService_1.ResizeObserverService, componentProvider_1.ComponentProvider, componentResolver_1.ComponentResolver, componentRecipes_1.ComponentRecipes, heightScaler_1.HeightScaler, autoHeightCalculator_1.AutoHeightCalculator, cellRendererFactory_1.CellRendererFactory, horizontalResizeService_1.HorizontalResizeService, pinnedRowModel_1.PinnedRowModel, dragService_1.DragService, displayedGroupCreator_1.DisplayedGroupCreator, eventService_1.EventService, gridOptionsWrapper_1.GridOptionsWrapper, selectionController_1.SelectionController, filterManager_1.FilterManager, columnController_1.ColumnController, paginationProxy_1.PaginationProxy, rowRenderer_1.RowRenderer, expressionService_1.ExpressionService, columnFactory_1.ColumnFactory, csvCreator_1.CsvCreator, downloader_1.Downloader, xmlFactory_1.XmlFactory, gridSerializer_1.GridSerializer, templateService_1.TemplateService, navigationService_1.NavigationService, popupService_1.PopupService, valueCache_1.ValueCache, valueService_1.ValueService, alignedGridsService_1.AlignedGridsService, logger_1.LoggerFactory, columnUtils_1.ColumnUtils, autoWidthCalculator_1.AutoWidthCalculator, popupService_1.PopupService, gridCore_1.GridCore, standardMenu_1.StandardMenuFactory, dragAndDropService_1.DragAndDropService, columnApi_1.ColumnApi, focusedCellController_1.FocusedCellController, mouseEventService_1.MouseEventService, cellNavigationService_1.CellNavigationService, filterStage_1.FilterStage, sortStage_1.SortStage, flattenStage_1.FlattenStage, filterService_1.FilterService, cellEditorFactory_1.CellEditorFactory, cellRendererService_1.CellRendererService, valueFormatterService_1.ValueFormatterService, stylingService_1.StylingService, scrollVisibleService_1.ScrollVisibleService, columnHoverService_1.ColumnHoverService, columnAnimationService_1.ColumnAnimationService, sortService_1.SortService, selectableService_1.SelectableService, autoGroupColService_1.AutoGroupColService, immutableService_1.ImmutableService, changeDetectionService_1.ChangeDetectionService, environment_1.Environment, animationFrameService_1.AnimationFrameService, sortController_1.SortController, zipContainer_1.ZipContainer],\n      components: components,\n      enterpriseDefaultComponents: Grid.enterpriseDefaultComponents,\n      debug: !!gridOptions.debug\n    };\n    this.logger = new logger_1.Logger('ag-Grid', function () {\n      return gridOptions.debug;\n    });\n    var contextLogger = new logger_1.Logger('Context', function () {\n      return contextParams.debug;\n    });\n    this.context = new context_1.Context(contextParams, contextLogger);\n    this.setColumnsAndData();\n    this.dispatchGridReadyEvent(gridOptions);\n    this.logger.log(\"initialised successfully, enterprise = \" + enterprise);\n  }\n\n  Grid.setEnterpriseBeans = function (enterpriseBeans, rowModelClasses) {\n    this.enterpriseBeans = enterpriseBeans; // the enterprise can inject additional row models. this is how it injects the viewportRowModel\n\n    utils_1.Utils.iterateObject(rowModelClasses, function (key, value) {\n      return Grid.RowModelClasses[key] = value;\n    });\n  };\n\n  Grid.setEnterpriseComponents = function (components) {\n    this.enterpriseComponents = components;\n  };\n\n  Grid.setFrameworkBeans = function (frameworkBeans) {\n    this.frameworkBeans = frameworkBeans;\n  };\n\n  Grid.setEnterpriseDefaultComponents = function (enterpriseDefaultComponents) {\n    this.enterpriseDefaultComponents = enterpriseDefaultComponents;\n  };\n\n  Grid.prototype.setColumnsAndData = function () {\n    var gridOptionsWrapper = this.context.getBean('gridOptionsWrapper');\n    var columnController = this.context.getBean('columnController');\n    var rowModel = this.context.getBean('rowModel');\n    var columnDefs = gridOptionsWrapper.getColumnDefs();\n    var rowData = gridOptionsWrapper.getRowData();\n    var nothingToSet = utils_1.Utils.missing(columnDefs) && utils_1.Utils.missing(rowData);\n\n    if (nothingToSet) {\n      return;\n    }\n\n    if (utils_1.Utils.exists(columnDefs)) {\n      columnController.setColumnDefs(columnDefs, \"gridInitializing\");\n    }\n\n    if (utils_1.Utils.exists(rowData) && rowModel.getType() === constants_1.Constants.ROW_MODEL_TYPE_CLIENT_SIDE) {\n      var clientSideRowModel = rowModel;\n      clientSideRowModel.setRowData(rowData);\n    }\n  };\n\n  Grid.prototype.dispatchGridReadyEvent = function (gridOptions) {\n    var eventService = this.context.getBean('eventService');\n    var readyEvent = {\n      type: events_1.Events.EVENT_GRID_READY,\n      api: gridOptions.api,\n      columnApi: gridOptions.columnApi\n    };\n    eventService.dispatchEvent(readyEvent);\n  };\n\n  Grid.prototype.getRowModelClass = function (gridOptions) {\n    var rowModelType = gridOptions.rowModelType; //TODO: temporary measure before 'enterprise' is completely removed (similar handling in gridOptionsWrapper is also required)\n\n    rowModelType = rowModelType === 'enterprise' ? constants_1.Constants.ROW_MODEL_TYPE_SERVER_SIDE : rowModelType;\n\n    if (utils_1.Utils.exists(rowModelType)) {\n      var rowModelClass = Grid.RowModelClasses[rowModelType];\n\n      if (utils_1.Utils.exists(rowModelClass)) {\n        return rowModelClass;\n      } else {\n        if (rowModelType === 'normal') {\n          console.warn(\"ag-Grid: normal rowModel deprecated. Should now be called client side row model instead.\");\n          return clientSideRowModel_1.ClientSideRowModel;\n        }\n\n        console.error('ag-Grid: could not find matching row model for rowModelType ' + rowModelType);\n\n        if (rowModelType === constants_1.Constants.ROW_MODEL_TYPE_VIEWPORT) {\n          console.error('ag-Grid: rowModelType viewport is only available in ag-Grid Enterprise');\n        }\n\n        if (rowModelType === constants_1.Constants.ROW_MODEL_TYPE_SERVER_SIDE) {\n          console.error('ag-Grid: rowModelType server side is only available in ag-Grid Enterprise');\n        }\n      }\n    }\n\n    return clientSideRowModel_1.ClientSideRowModel;\n  };\n\n  Grid.prototype.destroy = function () {\n    this.context.destroy();\n  }; // the default is ClientSideRowModel, which is also used for pagination.\n  // the enterprise adds viewport to this list.\n\n\n  Grid.RowModelClasses = {\n    infinite: infiniteRowModel_1.InfiniteRowModel,\n    clientSide: clientSideRowModel_1.ClientSideRowModel\n  };\n  return Grid;\n}();\n\nexports.Grid = Grid;","map":null,"metadata":{},"sourceType":"script"}